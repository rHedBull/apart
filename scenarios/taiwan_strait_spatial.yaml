# Taiwan Strait Crisis - Spatial Graph Example
# Demonstrates graph-based spatial modeling for geopolitical simulations

max_steps: 5
time_step_duration: "1 day"
simulator_awareness: true
enable_compute_resources: false

# Engine configuration
engine:
  provider: ollama
  model: llama3.1:8b

  system_prompt: |
    You are the simulation engine for a Taiwan Strait geopolitical crisis scenario.

    CRITICAL: Output valid JSON only. Use lowercase true/false, not True/False.

    SPATIAL RULES:
    - Location must be a valid node ID string like "taiwan" or "fujian"
    - Use format: "location": {"value": "taiwan"}
    - Valid nodes: taiwan, fujian, beijing, japan, guam, philippines, south_china_sea, east_china_sea, pacific

    Generate realistic daily updates tracking tensions and positions.

  simulation_plan: |
    5-day Taiwan Strait crisis with graph-based spatial modeling.

    ACTORS (4 agents):
    1. PLA Fleet - Chinese military naval forces
    2. Taiwan Navy - Republic of China naval defense
    3. US Carrier Group - 7th Fleet response
    4. Japan MSDF - Maritime Self-Defense Force observation

    SPATIAL DYNAMICS:
    - Track fleet positions using graph nodes
    - Movement constrained by edges and budget
    - Maritime blockade can block edge types

  realism_guidelines: |
    - Naval vessels move between defined locations
    - Track positions accurately using node IDs
    - Respect movement budget constraints
    - Maritime blockade blocks maritime edges

  context_window_size: 5

# Geography with spatial graph model
geography:
  spatial_model: "graph"

  nodes:
    # Taiwan
    - id: "taiwan"
      name: "Taiwan"
      type: "nation"
      properties:
        population: 24000000
        strategic_value: 95

    # Chinese coastal regions
    - id: "fujian"
      name: "Fujian Province"
      type: "region"
      properties:
        pla_bases: 5
        strategic_value: 70

    - id: "zhejiang"
      name: "Zhejiang Province"
      type: "region"
      properties:
        pla_bases: 3

    # International waters / key positions
    - id: "taiwan_strait"
      name: "Taiwan Strait"
      type: "waterway"
      properties:
        width_km: 180
        strategic_value: 100

    - id: "south_china_sea_north"
      name: "South China Sea (North)"
      type: "waterway"
      properties:
        international_waters: true

    - id: "philippine_sea"
      name: "Philippine Sea"
      type: "waterway"
      properties:
        us_patrol_zone: true

    # Allied bases
    - id: "okinawa"
      name: "Okinawa"
      type: "base"
      properties:
        us_presence: true
        japan_sdf: true

    - id: "guam"
      name: "Guam"
      type: "base"
      properties:
        us_territory: true
        us_forces: true

    - id: "yokosuka"
      name: "Yokosuka"
      type: "base"
      properties:
        us_7th_fleet_hq: true

  edges:
    # Taiwan connections
    - from: "taiwan"
      to: "taiwan_strait"
      type: "maritime"
      directed: false
      properties:
        distance_km: 90
        travel_time_hours: 2
        traversal_cost: 5

    - from: "taiwan"
      to: "philippine_sea"
      type: "maritime"
      directed: false
      properties:
        distance_km: 150
        travel_time_hours: 4
        traversal_cost: 8

    - from: "taiwan"
      to: "south_china_sea_north"
      type: "maritime"
      directed: false
      properties:
        distance_km: 200
        travel_time_hours: 5
        traversal_cost: 10

    # China connections
    - from: "fujian"
      to: "taiwan_strait"
      type: "maritime"
      directed: false
      properties:
        distance_km: 90
        travel_time_hours: 2
        traversal_cost: 5

    - from: "zhejiang"
      to: "taiwan_strait"
      type: "maritime"
      directed: false
      properties:
        distance_km: 250
        travel_time_hours: 6
        traversal_cost: 12

    - from: "fujian"
      to: "south_china_sea_north"
      type: "maritime"
      directed: false
      properties:
        distance_km: 300
        travel_time_hours: 7
        traversal_cost: 14

    # US/Japan connections
    - from: "okinawa"
      to: "philippine_sea"
      type: "maritime"
      directed: false
      properties:
        distance_km: 400
        travel_time_hours: 8
        traversal_cost: 15

    - from: "okinawa"
      to: "taiwan_strait"
      type: "maritime"
      directed: false
      properties:
        distance_km: 600
        travel_time_hours: 12
        traversal_cost: 22

    - from: "yokosuka"
      to: "okinawa"
      type: "maritime"
      directed: false
      properties:
        distance_km: 1500
        travel_time_hours: 24
        traversal_cost: 40

    - from: "guam"
      to: "philippine_sea"
      type: "maritime"
      directed: false
      properties:
        distance_km: 1000
        travel_time_hours: 18
        traversal_cost: 30

    - from: "philippine_sea"
      to: "taiwan_strait"
      type: "maritime"
      directed: false
      properties:
        distance_km: 500
        travel_time_hours: 10
        traversal_cost: 18

  movement:
    default_budget_per_step: 30
    allow_multi_hop: true
    blocked_edge_types: []  # Can add "maritime" to simulate blockade

# Global state variables
global_vars:
  blockade_active:
    type: bool
    default: false
    description: "Whether maritime blockade is in effect"

  escalation_level:
    type: int
    default: 20
    min: 0
    max: 100

  naval_engagement_risk:
    type: int
    default: 15
    min: 0
    max: 100

# Per-agent variables
agent_vars:
  location:
    type: dict
    default: {"value": "unknown"}
    description: "Current location (spatial graph node ID)"

  fleet_strength:
    type: int
    default: 100
    min: 0
    max: 100

  combat_readiness:
    type: int
    default: 80
    min: 0
    max: 100

  movement_intent:
    type: dict
    default: {"value": "patrol"}
    description: "Current movement intent: patrol, advance, withdraw, hold"

# Agents
agents:
  - name: "PLA Fleet"
    llm:
      provider: gemini
      model: gemini-2.5-flash
    system_prompt: |
      You are the PLA Navy Eastern Theater Command.

      YOUR OBJECTIVE: Establish naval dominance in Taiwan Strait

      YOUR CAPABILITIES:
      - Large fleet with carrier group
      - Shore-based anti-ship missiles
      - Air superiority over strait

      Track your position using the 'location' variable.
      Report movements and strategic positioning.
    variables:
      location: {"value": "fujian"}
      fleet_strength: 95
      combat_readiness: 90
      movement_intent: {"value": "patrol"}

  - name: "Taiwan Navy"
    llm:
      provider: gemini
      model: gemini-2.5-flash
    system_prompt: |
      You are the Republic of China Navy.

      YOUR OBJECTIVE: Defend Taiwan and maintain sea lanes

      YOUR CAPABILITIES:
      - Defensive naval forces
      - Coastal missile batteries
      - Limited submarines

      Track your position using the 'location' variable.
      Coordinate with allies if possible.
    variables:
      location: {"value": "taiwan"}
      fleet_strength: 60
      combat_readiness: 85
      movement_intent: {"value": "patrol"}

  - name: "US Carrier Group"
    llm:
      provider: gemini
      model: gemini-2.5-flash
    system_prompt: |
      You are USS Ronald Reagan Carrier Strike Group (7th Fleet).

      YOUR OBJECTIVE: Support allies, maintain freedom of navigation

      YOUR CAPABILITIES:
      - Full carrier strike group
      - F/A-18 squadrons
      - Aegis destroyers

      Track your position using the 'location' variable.
      Balance deterrence with avoiding escalation.
    variables:
      location: {"value": "philippine_sea"}
      fleet_strength: 100
      combat_readiness: 95
      movement_intent: {"value": "patrol"}

  - name: "Japan MSDF"
    llm:
      provider: gemini
      model: gemini-2.5-flash
    system_prompt: |
      You are the Japan Maritime Self-Defense Force observation element.

      YOUR OBJECTIVE: Monitor situation, support US if required

      YOUR CONSTRAINTS:
      - Article 9 constitution limits
      - Defensive posture only
      - Intelligence sharing priority

      Track your position using the 'location' variable.
      Maintain observation and report.
    variables:
      location: {"value": "okinawa"}
      fleet_strength: 70
      combat_readiness: 80
      movement_intent: {"value": "patrol"}
