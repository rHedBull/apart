# Gemini Example - Cloud-Based Simulation with Structured JSON
# üîë Requires GEMINI_API_KEY environment variable
#
# This scenario uses Gemini's structured JSON output mode (response_mime_type: "application/json")
# to ensure clean JSON responses without markdown formatting or comments.
#
# ‚ö†Ô∏è  NOTE: If you encounter API errors, verify:
#    1. Your API key is valid: export GEMINI_API_KEY="your-key"
#    2. You have API quota remaining
#    3. The model is available in your region
#
# Alternative: Use scenarios/ollama_example.yaml for local models (mistral:7b recommended)

max_steps: 5
orchestrator_message: "What is your strategic decision for this turn?"

# Engine configuration - LLM-powered simulation engine
engine:
  provider: "gemini"
  model: "gemini-2.5-flash"  # Latest flash model (gemini-1.5-flash is deprecated)

  system_prompt: |
    You are the simulation engine managing an economic strategy game.
    Your role is to simulate realistic economic outcomes based on agent decisions.

    Maintain cause-and-effect relationships between agent actions and market conditions.
    Consider factors like interest rates, market volatility, and agent risk profiles.
    Keep responses focused and concise.

  simulation_plan: |
    This is a 5-step economic simulation with 3 AI agents:
    - Aggressive Strategist (aggressive, high-risk player)
    - Balanced Advisor (balanced, steady growth focus)
    - Conservative Analyst (conservative, capital preservation focus)

    Simulate realistic market dynamics, capital flows, and investment outcomes.
    Each agent's decisions should impact their capital and potentially affect global market conditions.

  realism_guidelines: |
    - Capital changes should be proportional to risk taken (¬±5-20% per step)
    - Market volatility affects outcome variance
    - Interest rates influence baseline returns
    - High-risk strategies have higher variance in outcomes
    - Agent decisions should have logical consequences

  context_window_size: 3

# Game state configuration
game_state:
  initial_resources: 200
  difficulty: "normal"

# Global variables tracked across the entire simulation
global_vars:
  interest_rate:
    type: float
    default: 0.04
    min: 0.0
    max: 1.0
    description: "Global interest rate affecting all agents"

  market_volatility:
    type: float
    default: 0.15
    min: 0.0
    max: 1.0
    description: "Market volatility factor"

  round_number:
    type: int
    default: 0
    min: 0
    description: "Current round number"

# Per-agent variables tracked for each agent
agent_vars:
  capital:
    type: float
    default: 1000.0
    min: 0.0
    description: "Agent's available capital"

  risk_tolerance:
    type: float
    default: 0.5
    min: 0.0
    max: 1.0
    description: "Agent's risk tolerance (0=risk-averse, 1=risk-seeking)"

  decisions_made:
    type: int
    default: 0
    min: 0
    description: "Number of decisions made by agent"

agents:
  # Aggressive AI strategist
  - name: "Aggressive Strategist"
    llm:
      provider: "gemini"
      model: "gemini-2.5-flash"
    system_prompt: |
      You are an aggressive AI strategist in an economic simulation.
      You favor high-risk, high-reward strategies.
      Keep responses concise (1-2 sentences) describing your strategic decision.
      Consider the current interest rate and market volatility.
    variables:
      capital: 2000.0
      risk_tolerance: 0.85

  # Balanced AI advisor
  - name: "Balanced Advisor"
    llm:
      provider: "gemini"
      model: "gemini-2.5-flash"
    system_prompt: |
      You are a balanced financial advisor in an economic simulation.
      You seek steady growth with calculated risks.
      Keep responses brief (1-2 sentences) explaining your approach.
      Factor in market conditions when making decisions.
    variables:
      capital: 1500.0
      risk_tolerance: 0.50

  # Conservative analyst
  - name: "Conservative Analyst"
    llm:
      provider: "gemini"
      model: "gemini-2.5-flash"
    system_prompt: |
      You are a conservative analyst in an economic simulation.
      You prioritize capital preservation and steady returns.
      Keep responses very short (1 sentence) with your decision.
      Consider all available market data carefully.
    variables:
      capital: 1200.0
      risk_tolerance: 0.30
